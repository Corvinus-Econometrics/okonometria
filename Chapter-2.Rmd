# A ggplot2 package használata {#Chapter-2}

```{css, echo=FALSE}
p {
  text-align: justify;
}
```

## Motiváció a ggplot package használatához

Bár maga a base R [értve itt ilyenkor mindig a `plot` paranccsal készült ábrákat] segítségével is lehet ábrákat készíteni, ez az egyszerűségét leszámítva nagyon ritkán ajánlott. Helyette érdemes a ggplot2-t alkalmazni, amely bár komplexebb, mint a base R, a személyre szabhatóságának szinte nincs limitje.
Ám amelett, hogy szebb ábráink lesznek van egy sokkal fontosabb oka amiért a ggplot fontos. A csomag a nevét Leland Wilkinson **Grammar of Graphics** c. munkája után kapta (innen a *gg*), amelyben megfogalmazásra került tulajdonképpen az ideális ábrakészítő algoritmus struktúrája. Mivel a ggplot2 ezt az elvet követi, így meglátjátok majd, hogy bár sok dolgot kell fejben tartani, minden logikus benne. Miután sikerül elsajátítani ezt az anyagot (és némi utána olvasás után) bármilyen szükséges ábrát el fogtok tudni készíteni.

## 1. lépés

A ggplot2 telepíthető önállóan is, illetve ez a csomag része egy "csomaggyűjteménynek", amit `tidyverse`-nek hívnak. Jelenleg mi csak a ggplot2-vel fogunk foglalkozni, így annak telepítése és betöltése is bőven elegendő lesz. Így annak függvényébne, hogy le van-e már töltve a package telepítsük [`install.packages("ggplot2")`], vagy ne, majd töltsük be [`library(ggplot2)`]. A ggplot2 helyett lehet egyből a `tidyverse`-t is betölteni, azonban jelenleg a többi package redundáns nekünk.

```{r}
library(ggplot2)
```


A ggplot2-vel kapunk néhány kiegészítő adattáblát, az egyszerűség kedvéért használjuk most ezek közül a `diamonds`-t. Lássuk az első kódunkat!

```{r}
ggplot(data = diamonds, mapping = aes(x = carat, y = price)) +
  geom_point()
```

Amit látunk tehát, hogy az ábrázolás a `ggplot` paranccsal kezdődik. Itt definiálni kell, hogy melyik táblának adait szeretnénk felhasználni (`diamonds`), majd pedig az ábrázoláshoz használt “keretet”, ami az `aes`-es belül kap helyet. Itt általában (mint például most) az x és y tengelyen ábrázolt adatokat kell megadni. A ggplot-ot mindig egy `geom` parancs követi, amellyel az ábra típusát adjuk meg.
Elsőre látásra ez még lehet túl sok információ, illetve a következőkben a bonyolultabb ábrákra rátérve elveszítheti az ember a fonalat. Amíg bizonytalan a ggplot használata javaslom a `esquisse` package használatát. Ezt csupán telepíteni kell a `install.packages("esquisse")` paranccsal, majd az `Addins` menüből lehet előhívni. Ennek segítségével "manuális" adhatóak meg az ábra elemei. Lássuk például az előző ábrát!

![](images/esquisse.gif)






