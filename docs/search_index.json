[["index.html", "Ökonometria Mi ez a projekt?", " Ökonometria Budapesti Corvinus Egyetem Mi ez a projekt? Rövid leírás a bookdownhoz [] p { text-align: justify; } .author { font-size: 20px; text-align: center; } .title { text-align: center; } "],["Chapter-1.html", "Els fejezet Els alfejezet Hogyan kell package-t telepíteni?", " Els fejezet Els alfejezet Els fejezet szövege []. Írás közben egyszeren lehet választani, hogy dlt, vagy félkövér betvel írjunk valamit, illetve a kódoknak érdemes ezzel a típussal kiemelni. Latex kódok is könnyedén írhatóak akár: \\(\\frac{4}{2} = 2\\). 4/2 #&gt; [1] 2 plot(cars) Hogyan kell package-t telepíteni? "],["Chapter-2.html", "A ggplot2 package használata Motiváció a ggplot package használatához Bevezetés Esquisse Szín Téma Geom Aes Facet Kitekintés", " A ggplot2 package használata p { text-align: justify; } Motiváció a ggplot package használatához Bár maga a base R [értve itt ilyenkor mindig a plot paranccsal készült ábrákat] segítségével is lehet ábrákat készíteni, ez az egyszerségét leszámítva nagyon ritkán ajánlott. Helyette érdemes a ggplot2-t alkalmazni, amely bár komplexebb, mint a base R, a személyre szabhatóságának szinte nincs fels határa. Ám amelett, hogy szebb ábráink lesznek van egy sokkal fontosabb ok, amiért a ggplotot használjuk. A csomag a nevét Leland Wilkinson Grammar of Graphics c. munkája után kapta (innen a gg), amelyben megfogalmazásra került lényegében az ideális ábrakészít algoritmus struktúrája. Mivel a ggplot2 ezt az elvet követi, így meglátjátok majd, hogy bár sok dolgot kell fejben tartani, minden logikus benne. Miután sikerül elsajátítani ezt az anyagot (és némi utána olvasás után) bármilyen szükséges ábrát el fogtok tudni készíteni. Bevezetés A ggplot2 telepíthet önállóan is, illetve ez a csomag része egy csomaggyjteménynek, amit tidyverse-nek hívnak. Jelenleg mi csak a ggplot2-vel fogunk foglalkozni, így annak telepítése és betöltése is bven elegend lesz. Így annak függvényébne, hogy le van-e már töltve a package telepítsük [install.packages(\"ggplot2\")], vagy ne, majd töltsük be [library(ggplot2)]. A ggplot2 helyett lehet egybl a tidyverse-t is betölteni, azonban jelenleg a többi package redundáns nekünk. library(ggplot2) A ggplot2-vel kapunk néhány kiegészít adattáblát, az egyszerség kedvéért használjuk most ezek közül a diamonds-t. Pillanatra tekintsük meg az adattábla felépítését: head(diamonds) html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #zuavtkqjxo .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #zuavtkqjxo .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #zuavtkqjxo .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #zuavtkqjxo .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 4px; border-top-color: #FFFFFF; border-top-width: 0; } #zuavtkqjxo .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #zuavtkqjxo .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #zuavtkqjxo .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #zuavtkqjxo .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #zuavtkqjxo .gt_column_spanner_outer:first-child { padding-left: 0; } #zuavtkqjxo .gt_column_spanner_outer:last-child { padding-right: 0; } #zuavtkqjxo .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; overflow-x: hidden; display: inline-block; width: 100%; } #zuavtkqjxo .gt_group_heading { padding: 8px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #zuavtkqjxo .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #zuavtkqjxo .gt_from_md > :first-child { margin-top: 0; } #zuavtkqjxo .gt_from_md > :last-child { margin-bottom: 0; } #zuavtkqjxo .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #zuavtkqjxo .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 12px; } #zuavtkqjxo .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #zuavtkqjxo .gt_first_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; } #zuavtkqjxo .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #zuavtkqjxo .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #zuavtkqjxo .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #zuavtkqjxo .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #zuavtkqjxo .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #zuavtkqjxo .gt_footnote { margin: 0px; font-size: 90%; padding: 4px; } #zuavtkqjxo .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #zuavtkqjxo .gt_sourcenote { font-size: 90%; padding: 4px; } #zuavtkqjxo .gt_left { text-align: left; } #zuavtkqjxo .gt_center { text-align: center; } #zuavtkqjxo .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #zuavtkqjxo .gt_font_normal { font-weight: normal; } #zuavtkqjxo .gt_font_bold { font-weight: bold; } #zuavtkqjxo .gt_font_italic { font-style: italic; } #zuavtkqjxo .gt_super { font-size: 65%; } #zuavtkqjxo .gt_footnote_marks { font-style: italic; font-size: 65%; } A diamonds adattábla carat cut color clarity depth table price x y z 0.23 Ideal E SI2 61.5 55 326 3.95 3.98 2.43 0.21 Premium E SI1 59.8 61 326 3.89 3.84 2.31 0.23 Good E VS1 56.9 65 327 4.05 4.07 2.31 0.29 Premium I VS2 62.4 58 334 4.20 4.23 2.63 0.31 Good J SI2 63.3 58 335 4.34 4.35 2.75 0.24 Very Good J VVS2 62.8 57 336 3.94 3.96 2.48 Lássuk az els ábránkat ggplottal! ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() Ábra 1: A legels ábránk ggplot használatával Amit látunk, hogy az ábrázolás a ggplot paranccsal kezddik. Itt definiálni kell, hogy melyik táblának adatait szeretnénk felhasználni (diamonds), majd pedig az ábrázoláshoz használt keretet, ami az aes-es belül kap helyet. Itt általában (mint például most) az x és y tengelyen ábrázolt adatokat kell megadni. A ggplot-ot mindig egy geom parancs követi, amellyel az ábra típusát adjuk meg. Ezen az ábrán azonban még nicsen semmilyen felirat. Minden felirat megadható a labs() függvényben. Példa: ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + labs( title = &quot;Figyelemfelkelt cím&quot;, subtitle = &quot;Az alcím pontosítja a témát&quot;, x = &quot;x-tengely váltózójának neve&quot;, y = &quot;y-tengely változójának neve&quot;, caption = &quot;Mindent megmagyarázó hosszú leírás.&quot; ) Ábra 2: Feliratok elhelyezése az ábrán Esquisse Els látásra ez még lehet túl sok információ, illetve a következkben a bonyolultabb ábrákra rátérve elveszítheti az ember a fonalat. Amíg bizonytalan a ggplot használata javaslom a esquisse packaget Ezt csupán telepíteni kell a install.packages(\"esquisse\") paranccsal, majd az Addins menübl lehet elhívni. Ennek segítségével manuálisan adhatóak meg az ábra elemei. Lássuk például az elz ábrát! Szín Az esquisse automatikusan hozzáadott 3 elemet, amit akkor itt tisztázni szükséges. A geom függvényen belül a size paraméter a pontok méretért felel, míg a color a pontok színéért. Színként megadható bármilyen hexadecimális érték, illetve az R számos színt ismer (red, green, blue, black, stb.). Ábra 3: Néhány példa az elérhet színekre Téma A 3. dolog amit esquisse csatolt a kódunk mellé az egy theme parancs. Ez a parancstípus az ábra hátterének, jelmagyarázatának és feliratainak esztétikáját adja meg. Lássunk ezekbl is néhányat! ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + theme_bw() ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + theme_classic() ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + theme_grey() ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + theme_minimal() Ábra 4: Néhány elérhet téma Persze van még rengeteg, válogass nyugodtan: https://www.datanovia.com/en/blog/ggplot-themes-gallery/ Ami még fontos, hogy a theme() függvénnyel módosíthatóak a témánk egyes elemei (háttérszín, betszín stb.). Például legyen tényleg figyelemfelkelt a fentebb bemutatott cím! ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() + labs( title = &quot;Figyelemfelkelt cím&quot;, subtitle = &quot;Az alcím pontosítja a témát&quot;, x = &quot;x-tengely váltózójának neve&quot;, y = &quot;y-tengely változójának neve&quot;, caption = &quot;Mindent megmagyarázó hosszú leírás.&quot; ) + theme( plot.title = element_text(color = &quot;red&quot;, size = 30) ) Ábra 5: Téma egy elmének megváltoztatására példa Geom A plot szempontjából lényeges fontosabb azonban a geom függvény. Maga a függvény adja meg az ábra típusát, azonban a benne foglalt paraméterek sem elhanyagolhatóak. Nézzük példát a típusokra (csak párat van módom említeni a végtelenül sokból)! ggplot(data = diamonds, mapping = aes(x = carat)) + geom_histogram() ggplot(data = diamonds, mapping = aes(x = carat)) + geom_histogram() + geom_vline(xintercept = mean(diamonds$carat), color = &#39;red4&#39;) ggplot(data = diamonds, mapping = aes(x = cut)) + geom_bar() ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point() Ábra 6: Példák ábratípusokra A 2. kódból látszik, hogy több geom is tartozhat egyszerre egy ábrához, így lehet például egy hisztogramon feltüntetni az átlagot egy függleges vonallal (geom_vline). Ennek párja is rendkívül hasznos tud lennni a geom_hline, amivel lehet akár 0 mentén húzni egy vízszintes vonalat. A cut egy kategorikus változó az adattáblánkban, amelynek az egyes kategóriákhoz tartozó darabszámait egy geom_bar-al gyorsan kirajzolhatjuk. Most nézzük a paramétereket! Eddig láttunk példát a size-ra és a color-ra, ami majdnem minden geom esetén csinál valamit, de egyes geomoknak vannak speciális paramétereik is, mint pélául az elbbi példában az xintercept. Lássunk néhány további fontos paraméterre példákat: html { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif; } #vrsezlqphw .gt_table { display: table; border-collapse: collapse; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; } #vrsezlqphw .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #vrsezlqphw .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; border-bottom-color: #FFFFFF; border-bottom-width: 0; } #vrsezlqphw .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 0; padding-bottom: 4px; border-top-color: #FFFFFF; border-top-width: 0; } #vrsezlqphw .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #vrsezlqphw .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; } #vrsezlqphw .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; } #vrsezlqphw .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; } #vrsezlqphw .gt_column_spanner_outer:first-child { padding-left: 0; } #vrsezlqphw .gt_column_spanner_outer:last-child { padding-right: 0; } #vrsezlqphw .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 6px; overflow-x: hidden; display: inline-block; width: 100%; } #vrsezlqphw .gt_group_heading { padding: 8px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; } #vrsezlqphw .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; } #vrsezlqphw .gt_from_md > :first-child { margin-top: 0; } #vrsezlqphw .gt_from_md > :last-child { margin-bottom: 0; } #vrsezlqphw .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; } #vrsezlqphw .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 12px; } #vrsezlqphw .gt_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #vrsezlqphw .gt_first_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; } #vrsezlqphw .gt_grand_summary_row { color: #333333; background-color: #FFFFFF; text-transform: inherit; padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; } #vrsezlqphw .gt_first_grand_summary_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; border-top-style: double; border-top-width: 6px; border-top-color: #D3D3D3; } #vrsezlqphw .gt_striped { background-color: rgba(128, 128, 128, 0.05); } #vrsezlqphw .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; } #vrsezlqphw .gt_footnotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #vrsezlqphw .gt_footnote { margin: 0px; font-size: 90%; padding: 4px; } #vrsezlqphw .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; } #vrsezlqphw .gt_sourcenote { font-size: 90%; padding: 4px; } #vrsezlqphw .gt_left { text-align: left; } #vrsezlqphw .gt_center { text-align: center; } #vrsezlqphw .gt_right { text-align: right; font-variant-numeric: tabular-nums; } #vrsezlqphw .gt_font_normal { font-weight: normal; } #vrsezlqphw .gt_font_bold { font-weight: bold; } #vrsezlqphw .gt_font_italic { font-style: italic; } #vrsezlqphw .gt_super { font-size: 65%; } #vrsezlqphw .gt_footnote_marks { font-style: italic; font-size: 65%; } Paraméter Jelentés fill kitöltés színe alpha átlátszóság ltp vonal szaggatásának típusa shape alak típusa ggplot(data = diamonds, mapping = aes(x = carat)) + geom_histogram(color = &#39;black&#39;, fill = &quot;red&quot;) ggplot(data = diamonds, mapping = aes(x = carat)) + geom_vline(xintercept = mean(diamonds$carat), lty = 2) ggplot(data = diamonds, mapping = aes(x = cut)) + geom_bar(alpha = .3) ggplot(data = diamonds, mapping = aes(x = carat, y = price)) + geom_point(shape = 21, color = &#39;black&#39;, fill = &#39;green&#39;) Ábra 7: Példák geom paraméterre Az utolsó ábra itt még igényel némi magyarázatot. A pont diagram alapbeállítása szerint csak color paraméter adható meg. Azonban ha a shape-t átállítjuk, akkor van lehetségünk olyan pontdiagramokat rajzolni, amelyeknek belsejéhez tartozó színt adja meg a fill, a szegélyét a color. Aes Korábban csak átsiklottunk az aes() függvényen, ami az ábra keretét adta. Most nézzük meg kicsit részletesebben! A mapping paraméter, aminek megadásához használjuk fel az aes()-t az elzekben a ggplot() függvényen belül szerepelt. Ennek azonban nem kell feltétlenül így lennie. A következ 3 kód, mind ugyanazt hajtja végre (erre még visszatérünk): ggplot(diamonds, aes(x = carat, y = price)) + geom_point() ggplot(diamonds) + aes(x = carat, y = price) + geom_point() ggplot(diamonds) + geom_point(aes(x = carat, y = price)) Az aes-ben azonban nem csak x- és y-tengely változóit definiálhatjuk. Minden ami geom-beni paraméter, az megadásra kerülhet az aes()-ben is, azonban ilyenkor az adott változó értéke szerint kerül megadásra (pl.: egy harmadik változó szerint van definiálva a méret, vagy a szín). Ami paraméter az aes()-ben kerül megadásra, az automatikusan a jelmagyarázatra is felkerül. Lássunk két példát! ggplot(diamonds, aes(x = carat, y = price, color = cut)) + geom_point() ggplot(diamonds, aes(x = carat, y = price, size = cut)) + geom_point(alpha = .3) Ábra 8: Extra változó felvétele az aes()-be Ha egy változó szerint adjuk meg a színeket, akkor érdemes a színezésnek módját is megadni. Erre leginkább a viridis függvények a javasoltak (számos alkalommla láthatod tudományos publikációkban + végzdésre figyeljünk: viridis_d, mint diszkért/viridis_c, mint folytonos), de ha például fontos, hogy fekete-fehér legyen, arra is van mód, illetve kézileg is meg lehet adni színeket. ggplot(diamonds, aes(x = carat, y = price, color = cut)) + geom_point() ggplot(diamonds, aes(x = carat, y = price, color = cut)) + geom_point() + scale_color_viridis_d(option = &quot;magma&quot;) ggplot(diamonds, aes(x = carat, y = price, color = cut)) + geom_point() + scale_color_manual( values = c(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;orange&quot;) ) Ábra 9: Kitöltési opciók És most vissza oda, hogy miért is hasznos, hogy több aes() definiálható egyetlen ábrán. Elképzelhet, hogy két külön geom-ot használunk együtt. Legyen mondjuk egy pontdiagram és egy azokra illesztett trendvonal. Utóbbi a geom_smooth paranccsal érhet el, s amennyiben lineáris függvény formára vágyunk (yes), úgy adjuk meg neki a method = \"lm\" paramétert. ggplot(diamonds, aes(x = carat, y = price, color = cut)) + geom_point() + geom_smooth(method = &quot;lm&quot;) Ábra 10: Lineáris trend illesztése pontdiagramra Mint látjuk jelen esetben a geom_smooth ugyanazt az aes()-t alkalmazza, mint a geom_point. Ez azonban problémás, ha nem akarunk a kategorikus ismérv mentén 5 külön trendvonalat illeszteni. Ilyenkor jelent megoldás egy új aes() megadása egyetlen ábrán belül. ggplot(diamonds) + geom_point(aes(x = carat, y = price, color = cut)) + geom_smooth(aes(x = carat, y = price), method = &quot;lm&quot;) Ábra 11: Lineáris trend illesztése pontdiagramra két külön esztétika függvénnyel Facet A facet az utolsó parancs amit érinteni kívánunk. Ennek segítségével lehetség van egy ábra felosztására valamely változó mentén. Például a cut változó szerint csoportosítva megtekintve a pontdiagramok: ggplot(diamonds, aes(x = carat, y = price)) + geom_point() + facet_wrap(~ cut) Ábra 12: Facet alkalmazása egy változó szerint Ha pedig soronként és oszloponként is akarunk csoportosítani: ggplot(diamonds, aes(x = carat, y = price)) + geom_point() + facet_grid(color ~ cut) Ábra 13: Facet alkalmazása két változó szerint Kitekintés A ggplot2 logikusan felépített mködése annyira a felhasználók kedvencévé tette, hogy számos kiegészító package épült rá: ggpubs, GGally, gganimate, stb. Ezek jelenleg nem részei a tananyagnak, azonban érdemes rájuk nézni, ha szakdolgozat vagy TDK prezentálása során szeretnéd lenygözni a közönséged. Kedvcsináló: "]]
